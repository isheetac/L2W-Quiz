(this["webpackJsonpl2w-quiz"]=this["webpackJsonpl2w-quiz"]||[]).push([[0],{15:function(e,t,n){e.exports=n(27)},20:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(7),o=n.n(a),u=(n(20),n(8)),i=n(1),s={quizData:null,selectCategory:!1,correctAnswers:0,currentQuestion:0},l=Object(u.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUIZ":return Object(i.a)(Object(i.a)({},e),{},{quizData:t.quizData});case"SET_CATEGORY":return Object(i.a)(Object(i.a)({},e),{},{selectCategory:!0});case"COUNT_CORRECT":return Object(i.a)(Object(i.a)({},e),{},{correctAnswers:e.correctAnswers+1});case"UPDATE_CURRENT":return Object(i.a)(Object(i.a)({},e),{},{currentQuestion:e.currentQuestion+1});case"RESET_QUIZ":return{initialState:s};default:return e}})),h=n(2),p=n(3),f=n(6),d=n(5),m=n(4),E=function(e){var t=e.onClick,n=e.children,r=e.id;return c.a.createElement("button",{className:"button",onClick:t,id:r},n)},b=function(e){var t=e.refresh,n=e.score;return c.a.createElement("article",{className:"scoreCard"},c.a.createElement("h1",null,"Your Score"),c.a.createElement("p",null,n),c.a.createElement(E,{onClick:t},"Take Quiz Again"))},k=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).state={seconds:0},r}return Object(p.a)(n,[{key:"tick",value:function(){var e=this.props,t=e.duration,n=e.timeoutFn;this.state.seconds===t?n():this.setState((function(e){return{seconds:e.seconds+1}}))}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.duration-this.state.seconds;return c.a.createElement("span",{style:{color:"red"}},"Time Left: ",e)}}]),n}(c.a.Component),v=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.duration,r=e.wrongAnswers,a=e.correctAnswer,o=e.checkAnswerFn,u=[a].concat(r).sort();return c.a.createElement("article",{className:"card"},c.a.createElement("header",null,c.a.createElement(k,{duration:n,timeoutFn:o(!0,!1)})),c.a.createElement("div",null,c.a.createElement("p",null,t)),c.a.createElement("footer",null,u.map((function(e,t){return c.a.createElement(E,{key:t,onClick:o(e,a)},e)}))))}}]),n}(c.a.Component),C=function(e){return 200!==e.status&&console.log("Error with request ".concat(e.status)),e.json()},y=[{id:18,title:"Science: Computers"},{id:30,title:"Science: Gadgets"},{id:19,title:"Science: Mathematics"}],w=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).showCard=function(e,t){var n=e.correct_answer,a=e.incorrect_answers,o=e.question;return c.a.createElement(v,{key:t,checkAnswerFn:r.checkAnswer,question:atob(o),duration:10,correctAnswer:atob(n),wrongAnswers:a.map((function(e){return atob(e)}))})},r.checkAnswer=r.checkAnswer.bind(Object(f.a)(r)),r.restartQuiz=r.restartQuiz.bind(Object(f.a)(r)),r.sessionToken=null,r}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://opentdb.com/api_token.php?command=request").then(C).catch((function(e){throw new Error("Fetching session token failed ".concat(e))})).then((function(t){e.sessionToken=t.token}))}},{key:"fetchCategory",value:function(e){var t=this;return function(){var n=t.props,r=n.setQuiz,c=n.setCategory;(function(e,t){return fetch("https://opentdb.com/api.php?amount=10&category=".concat(e,"&type=multiple&encode=base64&token=").concat(t)).then(C).catch((function(e){throw new Error("Fetching quiz failed ".concat(e))}))})(e,t.sessionToken).then((function(e){return r(e.results)})).then((function(){return c()}))}}},{key:"restartQuiz",value:function(){(0,this.props.resetQuiz)()}},{key:"checkAnswer",value:function(e,t){var n=this.props,r=n.countCorrect,c=n.updateCurrent,a=n.currentQuestion;return function(){e===t&&r(),c(a)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.quizData,r=t.selectCategory,a=t.correctAnswers,o=t.currentQuestion;return c.a.createElement("div",{className:"app"},!r&&c.a.createElement("h1",null,"Pick a Category"),!r&&y.map((function(t,n){return c.a.createElement(E,{key:n,onClick:e.fetchCategory(t.id),id:t.id},t.title)})),n&&o<10?this.showCard(n[o],o):"",n&&10===o?c.a.createElement(b,{score:a,refresh:this.restartQuiz}):"")}}]),n}(c.a.Component),O=n(14),j=Object(O.a)((function(e){return{quizData:e.quizData,selectCategory:e.selectCategory,currentQuestion:e.currentQuestion,correctAnswers:e.correctAnswers}}),(function(e){return{setQuiz:function(t){return e({type:"SET_QUIZ",quizData:t})},setCategory:function(){return e({type:"SET_CATEGORY"})},resetQuiz:function(){return e({type:"RESET_QUIZ"})},countCorrect:function(){return e({type:"COUNT_CORRECT"})},updateCurrent:function(t){return e(function(e){return{type:"UPDATE_CURRENT",currentQuestion:e}}(t))}}}))(w);o.a.render(c.a.createElement(j,{store:l}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.df0535b2.chunk.js.map